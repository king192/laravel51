define("act/acts",function(require,a,b){}),define("act/btn_default",function(require,a,b){var c=require("jquery"),d="接口请求失败！",e=require("tpl/common/button"),f=require("brick"),g=require("core/tplFunc").canAccessLink,h=require("core/io/trans")(),i=require("ux/alertPop"),j=h.json;a.events={click:function(a,b,h){function k(a,f){j({url:a,dataType:"json",success:function(a){if(l.data("loading",0),1==a.ok){if(a.button){var g=e(a.button),h=l.parents(".card");c(b).replaceWith(g),a.need_delete&&h.remove(),a.scheme&&(location.href=a.scheme)}}else alert(a.msg||d);f&&f.close()},error:function(a){alert(d),l.data("loading",0),f&&f.close()}})}if(a.preventDefault(),!g)return f.notice.trigger("AccessDenied"),!1;var l=c(b);if(l.data("loading"))return!1;l.data("loading",1);var m=decodeURIComponent(l.attr("href"));if(h.action&&(m=decodeURIComponent(h.action)),-1!=m.indexOf("wbFilterCreate")&&-1!=m.indexOf("rootid")){var n=new i;n.init({wrapperId:"J-"+Date.now(),title:"确定屏蔽这条微博",label:'<input type="checkbox" checked/>&nbsp;同时屏蔽原微博及其转发微博',cancelBtn:{callback:function(){l.data("loading",0)}},confirmBtn:{callback:function(a){var b=a.find("input");b.prop("checked")?k(m+"&root=1",n):k(m,n)}}})}else k(m);return!1}}}),define("core/tplFunc",function(require,a,b){var c=require("core/util/keepParams"),d=require("core/util/checkLogin");require("core/util/accessLevel");a.canAccessLink=function(){return!!d}(),a.href=function(b){var e=b;return b&&("object"!=typeof b||(e=b.urls&&b.urls.h5||b.scheme))?!d&&$render_data.common.showPopLogin?"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":a.canAccessLink?0===e.indexOf("javascript:")?e:c(e):"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":"javascript:;"}}),define("core/util/keepParams",function(require,a,b){b.exports=function(a,b){var c,d=$render_data.common;return a&&d&&(c=b?d.ajaxPassParams:d.passParams,c&&(a+=-1!=a.indexOf("?")?"&"+c:"?"+c)),a}}),define("core/util/checkLogin",function(require,a,b){b.exports=function(){return!(1!=$render_data.common.isLogin&&1!=$render_data.common.login)}()}),define("core/util/accessLevel",function(require,a,b){b.exports=$render_data.common.seeLevel||0}),define("core/io/trans",function(require,a,b){var c=require("core/util/keepParams"),d=require("../../ux/alertPop"),d=require("../../ux/alertPop");b.exports=function(){var a={},b={};return b.set=function(b,c){if("undefined"!=typeof a[b])throw b+" 接口已经被定义！";a[b]=c},b.get=function(c,d){if("undefined"==typeof a[c])throw c+" 接口没有定义！";var e=$.extend({},a[c],d);b.json(e)},b.json=function(a){a.url=c(a.url,!0),a.type=a.type||"get",a.dataType=a.dataType||"json",a.timeout=a.timeout||1e3*("get"==a.type?30:60),"post"==a.type.toLowerCase()&&(a.data=a.data||{},a.data.st||(a.data.st=$render_data.common.st));var e=a.success;a.success=function(f){var g=((new Date).getTime(),""+f.ok);switch(g){case"-3":case"20031":$("#J-toast-wrapper").addClass("hid");var h=new d;return h.init({wrapperId:"J-"+(new Date).getTime(),html:'<div style="overflow:hidden;"><p style="margin:6px auto 22px;font-size:1.125rem;text-align:center">你发的太疯狂啦，请验证一下</p><img style="display:block;margin:0 0 15px;height:30px;" src="http://weibo.cn/interface/f/ttt/captcha/show.php?c='+f.captId+'" alt="验证码获取失败" /></div>',inputArr:[{placeholder:"请输入验证码"}],cancelBtn:{},confirmBtn:{callback:function(c){var d=c.find("input"),e=String.prototype.trim.call(d.val());return""==e?(h.showError(d,"验证码不能为空"),!1):(h.close(),a.data.captId=f.captId,a.data.code=e,void b.json(a))}}}),!1;case"-7":window.location.href="/security?from=0";break;case"-8":window.location.href="/security";break;case"-9":"post"==a.type.toLowerCase()?(alert("您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。"),location.href="/security/readonly"):e(f);break;case"-9+225":case"-9+222":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。",confirmBtn:{callback:function(){window.location.href="/security/stolenReadOnly"}}})):e(f);break;case"-98":case"-100":location.href=c(f.url||"/login?backUrl="+decodeURIComponent(location.href));break;case"-255":alert("您的帐号疑似被盗，已经被系统锁定部分功能，为了保障您的帐号安全，请立即修改密码。"),location.href="/security";break;case"403":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。\n如需帮助，请联系客服。");break;case"2014":location.href=data.location;break;case"20016":$("#J-toast-wrapper").addClass("hid"),alert("发微博太多啦，休息一会儿吧!");break;case"20018":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。");break;case"20019":$("#J-toast-wrapper").addClass("hid"),alert("相同内容请隔10分钟再进行发布哦。");break;case"20020":$("#J-toast-wrapper").addClass("hid"),alert("由于该内容为广告信息，无法进行发布！");break;case"20021":$("#J-toast-wrapper").addClass("hid"),alert("抱歉，此内容违反了《微博社区管理规定(试行)》或相关法规政策，无法进行指定操作。");break;case"20038":$("#J-toast-wrapper").addClass("hid"),alert("您刚才已经发过相似的内容啦，建议您第二天再尝试！");break;case"20046":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的登录邮箱尚未验证，不能使用完整功能，请验证邮箱。",cancelBtn:{},confirmBtn:{callback:function(){window.location.href="/edmActive?disable_sinaurl=1"}}})):e(f);break;case"ag:4_st:3":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"你的邮箱未激活！激活邮箱，即可使用邮箱和密码登录微博，安全又方便。",cancelBtn:!0,confirmBtn:{txt:"立即激活",callback:function(){window.location.href="https://passport.sina.cn/bindname/mail?entry=mweibo"}}})):e(f);break;default:e(f)}},$.ajax(a)},b}}),define("ux/alertPop",function(require,a,b){function c(){function a(a){return m=a||{},m.wrapperId?$("#"+m.wrapperId).size()?void alert(m.wrapperId+" ID 已经被占用啦！"):(h=d(m),e.append(h),$("body").append(e),i=$("#"+(m.wrapperId||"J-alertPop")),j=i.find(".wrapper"),k=i.find("#"+(m.cancelBtn&&m.cancelBtn.id||"J-alertPop-cancel")),l=i.find("#"+(m.confirmBtn&&m.confirmBtn.id||"J-alertPop-confirm")),g(),i.removeClass("hid"),f(),void(m.html&&m.htmlFunction&&m.htmlFunction.call(this,i.find(".custom-wrapper")))):void alert("alertPop 需要唯一标示 ID，庸人这么多，牵错手了可不是闹着玩儿的！")}function b(a,b,c){c="number"==typeof c&&c>3e3?c:3e3;var d=a.parent().parent().find(".error-label");d.html(b||"请重新输入").removeClass("hid"),clearTimeout(n.errorTimer),n.errorTimer=setTimeout(function(){d.addClass("hid").html("")},c)}function c(){i.addClass("hid"),i.remove()}function f(){var a=$("body").outerHeight(!0),b=j.outerHeight(),c=j.outerWidth(),d=window.scrollY,e=window.innerHeight,f=window.innerWidth;j.css({top:(e-b)/2+d,left:(f-c)/2}),i.css({height:a>e?a:e})}function g(a){l.on("click",o.confirm),k.on("click",o.cancel)}var h,i,j,k,l,m,n={},o={cancel:function(){var a=$(this);if(!a.hasClass("isDisabled"))return c(),m.cancelBtn&&m.cancelBtn.callback&&m.cancelBtn.callback.call(this,i),!1},confirm:function(){var a=$(this);if(!a.hasClass("isDisabled"))return m.confirmBtn&&m.confirmBtn.callback?m.confirmBtn.callback.call(this,i):c(),!1}};return{init:a,showError:b,close:c}}var d=require("tpl/ux/alertPop"),e=$(document.createDocumentFragment());b.exports=c}),define("tpl/ux/alertPop",function(require,a,b){require("core/tplFunc");b.exports=function(a){var b='<div id="'+a.wrapperId+'" class="alert-wrapper hid"><article class="wrapper">';if(a.title&&(b+='<header class="title">'+a.title+"</header>"),b+=" ",a.info&&(b+='<span class="info">'+a.info+"</span>"),b+=" ",a.html&&(b+='<div class="custom-wrapper">'+a.html+"</div>"),b+=" ",a.label&&(b+='<span class="label">'+a.label+"</span>"),b+=" ",a.inputArr&&a.inputArr.length){b+=" ";var c=a.inputArr;if(c)for(var d,e=-1,f=c.length-1;f>e;){if(d=c[e+=1],b+='<div class="input-wrapper"><div class="input-item">',"object"==typeof d&&d.length){b+=" ";var g=d;if(g)for(var h,i=-1,j=g.length-1;j>i;)h=g[i+=1],b+='<input id="'+(h.id||"")+'" name="'+(h.name||"")+'" type="text" placeholder="'+(h.placeholder||"")+'" value="'+(h.value||"")+'"/>';b+=" "}else b+='<input id="'+(d.id||"")+'" name="'+(d.name||"")+'" type="text" placeholder="'+(d.placeholder||"")+'" value="'+(d.value||"")+'"/>';b+='</div><p class="error-label hid"></p></div>'}b+=" "}return b+='<div class="action">',(a.cancelBtn||!a.cancelBtn&&!a.confirmBtn)&&(b+='<a id="'+(a.cancelBtn&&a.cancelBtn.id||"J-alertPop-cancel")+'" href="javascript:void(0);" class="btn cancel-btn',a.cancelBtn&&a.cancelBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.cancelBtn&&a.cancelBtn.txt||"取消")+"</a>"),b+=" ",a.confirmBtn&&(b+='<a id="'+(a.confirmBtn&&a.confirmBtn.id||"J-alertPop-confirm")+'" href="javascript:void(0);" class="btn confirm-btn',a.confirmBtn&&a.confirmBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.confirmBtn&&a.confirmBtn.txt||"确定")+"</a>"),b+="</div></article></div>"}}),define("act/follow",function(require,a,b){var c=require("jquery"),d="接口请求失败！",e=require("brick"),f=require("core/tplFunc").canAccessLink,g=require("core/io/trans")(),h=g.json;a.events={click:function(a,b,g){if(a.preventDefault(),!f)return e.notice.trigger("AccessDenied"),!1;var i="cover"==g.position;"1"==g.sub_type;if(1==g.sub_type&&!i)return!1;var j=c(b),k=j.data("act-url")||j.attr("href");return h({url:k,type:"POST",dataType:"json",data:{sub_type:g.sub_type,st:$render_data.common.st},success:function(a){1==a.ok?a.button&&(i?require(["tpl/mod/_cover_btn"],function(b){var c=b(a.button);j.replaceWith(c)}):require(["tpl/common/button"],function(b){var c=b(a.button);j.replaceWith(c)})):alert(a.msg||d)}}),!1}}}),define("act/hover",function(require,a,b){function c(){d&&d.removeClass("active"),d=0,e(document).off("touchend touchmove mouseup mousemove",c)}var d,e=require("jquery"),f=(require("brick"),require("core/io/actLog"));a.events={"touchstart mousedown":function(a,b){a.stopPropagation(),c(),d=e(b),setTimeout(function(){d&&d.addClass("active")},55),e(document).on("touchend touchmove mouseup mousemove click",c)},click:function(a,b){a.stopPropagation(),d=e(b);var c=d.data("jump"),g=d.data("jump-ignore");if(g){var h=a.target;if(-1!=g.split(",").indexOf(h.tagName.toLowerCase()))return}return c&&(d.data("actcode")?f(d.data("actcode"),function(){location.href=c}):location.href=c),!1}}}),define("core/io/actLog",function(require,a,b){b.exports=function(a,b){if(a){var c="/h5logs/actionLog?type=pic&act_code="+a+"&t="+(new Date).getTime(),d=require("core/util/keepParams");c=d(c,!0);var e=new Image;b&&(e.onload=b,e.onerror=b),e.src=c}}}),define("act/like",function(require,a,b){var c=require("jquery"),d="接口请求失败！",e=require("brick"),f=require("core/tplFunc").canAccessLink,g=require("core/io/trans")(),h=g.json;a.events={click:function(a,b,g){if(a.preventDefault(),!f)return e.notice.trigger("AccessDenied"),!1;var i=c(b),j=i.data("act-url")||i.attr("href"),k="cover"==g.position,l="1"==g.sub_type,m=parseInt(i.find(".inner").find("div").text(),10);return h({url:j,type:"POST",dataType:"json",data:{sub_type:g.sub_type},success:function(a){1==a.ok?a.button&&(k?require(["tpl/mod/_cover_btn"],function(b){i.replaceWith(b(a.button))}):require(["tpl/common/button"],function(b){var d=c(b(a.button));if(i.replaceWith(d),g.show_count){var e=l?m-1:m+1;d.find(".inner").append('<div class="txt-xl mct-d">'+e+"</div>"),d.attr("data-act-data",d.attr("data-act-data")+"&show_count=1")}})):alert(a.msg||d)}}),!1}}}),define("act/link",function(require,a,b){var c=require("brick"),d=require("core/tplFunc").canAccessLink;a.events={click:function(a,b,e){if(a.stopPropagation(),!d)return c.notice.trigger("AccessDenied"),!1;var f=$(b),g=f.data("act-url");g&&(location.href=g)}}}),define("act/picShow",function(require,a,b){var c=require("jquery");a.events={click:function(a,b,d){var e=c(b),f=e.data("src")||e.attr("src");f=f.replace(/\/\w+\//,"/large/"),require(["ux/picShow"],function(a){new a({imgList:f})})}}}),define("act/relation",function(require,a,b){function c(a,b){var c=require("ux/relationPop");c.init(a,b,$(".module-cover").find(".item-main").find("span").text())}function d(a,b,d,e){f({url:"/attentionDeal/"+a+"?",dataType:"json",type:"POST",data:{uid:b,st:$render_data.common.st},success:function(a,f,g){if(1==a.ok){2>d?(d+=2,c(e,b)):d-=3,console.log(d);var h={type:"relation",sub_type:d,uid:b},i=require("tpl/mod/_cover_btn")(h);e.replaceWith(i)}},error:function(){alert("操作失败，请稍后再试")}})}var e=require("core/io/trans")(),f=e.json,g=require("brick"),h=require("core/tplFunc").canAccessLink,e=require("core/io/trans")(),f=e.json;a.events={click:function(a,b,e){if(!h)return g.notice.trigger("AccessDenied"),!1;var f=$(b),i=f.data("act-uid"),j=parseInt(e.sub_type,10);if(2==j||3==j)return c(f,i),!1;if(4==j);else{var k="addAttention",l="";if((5==j||6==j)&&(k="delPrivate",l="你确定要关注，不再消悄悄关注吗？"),""!==l&&!confirm(l))return!1;d(k,i,j,f)}}}}),define("ux/relationPop",function(require,a,b){function c(a,b,c){return t=b,u=c,void 0===typeof t?void console.error("莫得 uid，哪个知道你要找谁噻？！"):a?(v.isInit||($("body").append(n),o=$("#J-relationPop"),p=o.find("#J-scroll"),q=o.find("#J-list"),r=o.find("#J-action"),f(),g()),o.removeClass("hid"),v.isInit=!0,e(a),void $(document).bind("click",w.clickToClose)):void console.error("没有 $target 的手谕，relationPop 是不会现身的!")}function d(){if(s){try{s.destory()}catch(a){console.log(a)}s=null}h()}function e(a){var b=a.offset(),c=b.top+a.outerHeight()+10,d=b.left+a.outerWidth()/2-o.outerWidth()/2-60,e=window.innerWidth-o.outerWidth()-5;d=d>5?d>e?e:d:5,o.css({top:c,left:d})}function f(){i.get("getGroupList",{data:"uid="+t,success:function(a){if(1==a.ok){var b='<a href="javascript:;" id="J-addGroup" class="add-btn">新建分组</a>';$.each(a.data,function(a,c){b+='<a href="javascript:;" data-id="'+a+'"'+(c.isin?'class="checked"':"")+">"+c.gname+"</a>"}),o.find(".loadingLarge").remove(),p.append(b),require(["core/lib/iscroll"],function(a){s=new a("#J-list",{scrollbars:!0,resizenable:!1,preventDefaultException:{tagName:/^(SPAN|A|INPUT|TEXTAREA|BUTTON|SELECT|IMG)$/}})})}}})}function g(){p.on("click","a",w.changeGroup),p.on("click","#J-addGroup",w.createGroup),r.on("click","[data-action=unfollow]",w.unfollow),r.on("click","[data-action=close]",w.clickToClose)}function h(){p.off("click","a",w.changeGroup)}var i=require("conf/inter/relationPop"),j=require("tpl/ux/relationPop")(),k=require("ux/alertPop"),l=new k,m=new k,n=$(document.createDocumentFragment());n.append(j);var o,p,q,r,s,t,u,v={},w={createGroup:function(){l.init({wrapperId:"J-createGroup-pop",title:"创建分组",inputArr:[{id:"J-group-name",placeholder:"分组名称最多8个汉字"}],confirmBtn:{callback:function(a){var b=a.find("#J-group-name"),c=String.prototype.trim.call(b.val()),d=c.replace(/[\u4E00-\u9FA5]/g,"aa");return""==c?void l.showError(b,"分组名称不能为空，请重新输入"):d.length>16?void l.showError(b,"分组名称不能超过16个字符或8个汉字"):/^[a-zA-z0-9]*$/.test(d)?(l.close(),void i.get("createGroup",{data:"&uid="+t+"&gname="+encodeURIComponent(c),success:function(a){var c="";1===a.ok?($.each(a.data,function(a,b){c+='<a href="javascript:;" data-id="'+a+'" class="checked">'+b+"</a>"}),b.val(""),p.append(c),s.refresh(),s.scrollToElement("a:last-child",100)):alert(a.msg)}})):void l.showError(b,"分组名称由数字、字母、中文组成")}}})},changeGroup:function(){var a=$(this);if(!a.hasClass("add-btn")){var b=a.hasClass("checked")?"removeUserFromGroup":"addUserToGroup";a.addClass("loading"),i.get(b,{data:"&gid="+a.data("id")+"&uid="+t,success:function(b){var c=b.ok,d=b.msg;a.removeClass("loading"),1==c?a.toggleClass("checked"):alert(d)}})}},unfollow:function(a){m.init({wrapperId:"J-"+(new Date).getTime(),info:"确定不再关注 "+(u?u:"用户名")+" 了？",confirmBtn:{callback:function(){i.get("unfollow",{data:"&uid="+t,success:function(a){1==a.ok?location.reload():alert(a.msg),m.close()}})}}})},clickToClose:function(a){var b=$(a.target);if(b.length){var c="J-relationPop"===b.attr("id"),d=b.parents("#J-list").size()>0,e="show-relationPop"===b.data("node")||b.parents('[data-node="show-relationPop"]').size()>0;if(!c&&!d&&!e)return o.addClass("hid"),void $(document).unbind("click",w.clickToClose)}return!1}};b.exports={init:c,destory:d}}),define("conf/inter/relationPop",function(require,a,b){var c=require("core/io/trans")();c.set("getGroupList",{url:"/attGroups/getAttGroupListByUid"}),c.set("createGroup",{url:"/attGroupsDeal/createAndAddGroup",type:"post"}),c.set("addUserToGroup",{url:"/attGroupsDeal/addUserToGroup",type:"post"}),c.set("removeUserFromGroup",{url:"/attGroupsDeal/moveUserFromGroup",type:"post"}),c.set("unfollow",{url:"/attentionDeal/delAttention",type:"post"}),b.exports=c}),define("tpl/ux/relationPop",function(require,a,b){require("core/tplFunc");b.exports=function(a){var b='<div class="relation-wrapper" id="J-relationPop"><div class="list" id="J-list"><div id="J-scroll"><div class="loadingLarge"></div></div></div><div class="action" id="J-action"><p class="layout-box"><a href="javascript:;" class="box-col" data-action="unfollow">取消关注</a><a href="javascript:;" class="box-col" data-action="close-relationPop">确定</a></p></div></div>';return b}}),define("tpl/mod/_cover_btn",function(require,a,b){require("core/tplFunc");b.exports=function(a){var b='<button class="btn btn-normal" data-act-type="'+a.type+'" data-act-data="sub_type='+a.sub_type+'&position=cover"';return a.scheme&&(b+=' data-act-url="'+a.scheme+'"'),a.uid&&(b+=' data-act-uid="'+a.uid+'"'),a.like_count&&(b+=' data-act-like-count="'+a.like_count+'"'),b+=">",a.type&&"like"===a.type?(b+=" ",b+=a.sub_type&&1===a.sub_type?'<i class="iconimg iconimg-xs icon icon-likedsmall"></i>':'<i class="iconimg iconimg-xs icon icon-likesmall"></i>',b+="<span>"+(a.name||"赞一下")+"</span>"):a.type&&"follow"===a.type?(b+=" ",b+=a.sub_type&&1===a.sub_type?'<i class="iconf iconf_userinfo_tick"></i><span>已关注</span>':'<i class="iconf iconf_userinfo_plus"></i><span>关注</span>',b+=" "):a.type&&"relation"===a.type?(b+=" ",b+=a.sub_type&&2===a.sub_type?'<i class="iconf iconf_userinfo_tick txt-xl"></i><span>已关注</span><i class="icon-font icon-font-arrow-down txt-xs"></i>':a.sub_type&&3===a.sub_type?'<i class="iconf iconf_userinfo_arrow txt-xl"></i><span>相互关注</span><i class="icon-font icon-font-arrow-down txt-xs"></i>':a.sub_type&&1===a.sub_type?'<i class="iconf iconf_userinfo_tick txt-xl"></i><span>加关注</span><i class="icon-font icon-font-arrow-down txt-xs"></i>':'<i class="iconf iconf_userinfo_plus txt-xl"></i><span>加关注</span>',b+=" "):(b+=" ",a.icon?b+='<i class="iconf '+a.icon+' txt-xl"></i>':a.pic&&(b+='<i class="iconimg iconimg-xs"><img src="'+a.pic+'"></i>'),b+="<span>"+a.name+"</span>"),b+="</button>"}}),define("act/btn_default",function(require,a,b){var c=require("jquery"),d="接口请求失败！",e=require("tpl/common/button"),f=require("brick"),g=require("core/tplFunc").canAccessLink,h=require("core/io/trans")(),i=require("ux/alertPop"),j=h.json;a.events={click:function(a,b,h){function k(a,f){j({url:a,dataType:"json",success:function(a){if(l.data("loading",0),1==a.ok){if(a.button){var g=e(a.button),h=l.parents(".card");c(b).replaceWith(g),a.need_delete&&h.remove(),a.scheme&&(location.href=a.scheme)}}else alert(a.msg||d);f&&f.close()},error:function(a){alert(d),l.data("loading",0),f&&f.close()}})}if(a.preventDefault(),!g)return f.notice.trigger("AccessDenied"),!1;var l=c(b);if(l.data("loading"))return!1;l.data("loading",1);var m=decodeURIComponent(l.attr("href"));if(h.action&&(m=decodeURIComponent(h.action)),-1!=m.indexOf("wbFilterCreate")&&-1!=m.indexOf("rootid")){var n=new i;n.init({wrapperId:"J-"+Date.now(),title:"确定屏蔽这条微博",label:'<input type="checkbox" checked/>&nbsp;同时屏蔽原微博及其转发微博',cancelBtn:{callback:function(){l.data("loading",0)}},confirmBtn:{callback:function(a){var b=a.find("input");b.prop("checked")?k(m+"&root=1",n):k(m,n)}}})}else k(m);return!1}}}),define("core/tplFunc",function(require,a,b){var c=require("core/util/keepParams"),d=require("core/util/checkLogin");require("core/util/accessLevel");a.canAccessLink=function(){return!!d}(),a.href=function(b){var e=b;return b&&("object"!=typeof b||(e=b.urls&&b.urls.h5||b.scheme))?!d&&$render_data.common.showPopLogin?"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":a.canAccessLink?0===e.indexOf("javascript:")?e:c(e):"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":"javascript:;"}}),define("core/util/keepParams",function(require,a,b){b.exports=function(a,b){var c,d=$render_data.common;return a&&d&&(c=b?d.ajaxPassParams:d.passParams,c&&(a+=-1!=a.indexOf("?")?"&"+c:"?"+c)),a}}),define("core/util/checkLogin",function(require,a,b){b.exports=function(){return!(1!=$render_data.common.isLogin&&1!=$render_data.common.login)}()}),define("core/util/accessLevel",function(require,a,b){b.exports=$render_data.common.seeLevel||0}),define("core/io/trans",function(require,a,b){var c=require("core/util/keepParams"),d=require("../../ux/alertPop"),d=require("../../ux/alertPop");b.exports=function(){var a={},b={};return b.set=function(b,c){if("undefined"!=typeof a[b])throw b+" 接口已经被定义！";a[b]=c},b.get=function(c,d){if("undefined"==typeof a[c])throw c+" 接口没有定义！";var e=$.extend({},a[c],d);b.json(e)},b.json=function(a){a.url=c(a.url,!0),a.type=a.type||"get",a.dataType=a.dataType||"json",a.timeout=a.timeout||1e3*("get"==a.type?30:60),"post"==a.type.toLowerCase()&&(a.data=a.data||{},a.data.st||(a.data.st=$render_data.common.st));var e=a.success;a.success=function(f){var g=((new Date).getTime(),""+f.ok);switch(g){case"-3":case"20031":$("#J-toast-wrapper").addClass("hid");var h=new d;return h.init({wrapperId:"J-"+(new Date).getTime(),html:'<div style="overflow:hidden;"><p style="margin:6px auto 22px;font-size:1.125rem;text-align:center">你发的太疯狂啦，请验证一下</p><img style="display:block;margin:0 0 15px;height:30px;" src="http://weibo.cn/interface/f/ttt/captcha/show.php?c='+f.captId+'" alt="验证码获取失败" /></div>',inputArr:[{placeholder:"请输入验证码"}],cancelBtn:{},confirmBtn:{callback:function(c){var d=c.find("input"),e=String.prototype.trim.call(d.val());return""==e?(h.showError(d,"验证码不能为空"),!1):(h.close(),a.data.captId=f.captId,a.data.code=e,void b.json(a))}}}),!1;case"-7":window.location.href="/security?from=0";break;case"-8":window.location.href="/security";break;case"-9":"post"==a.type.toLowerCase()?(alert("您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。"),location.href="/security/readonly"):e(f);break;case"-9+225":case"-9+222":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。",confirmBtn:{callback:function(){window.location.href="/security/stolenReadOnly"}}})):e(f);break;case"-98":case"-100":location.href=c(f.url||"/login?backUrl="+decodeURIComponent(location.href));break;case"-255":alert("您的帐号疑似被盗，已经被系统锁定部分功能，为了保障您的帐号安全，请立即修改密码。"),location.href="/security";break;case"403":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。\n如需帮助，请联系客服。");break;case"2014":location.href=data.location;break;case"20016":$("#J-toast-wrapper").addClass("hid"),alert("发微博太多啦，休息一会儿吧!");break;case"20018":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。");break;case"20019":$("#J-toast-wrapper").addClass("hid"),alert("相同内容请隔10分钟再进行发布哦。");break;case"20020":$("#J-toast-wrapper").addClass("hid"),alert("由于该内容为广告信息，无法进行发布！");break;case"20021":$("#J-toast-wrapper").addClass("hid"),alert("抱歉，此内容违反了《微博社区管理规定(试行)》或相关法规政策，无法进行指定操作。");break;case"20038":$("#J-toast-wrapper").addClass("hid"),alert("您刚才已经发过相似的内容啦，建议您第二天再尝试！");break;case"20046":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的登录邮箱尚未验证，不能使用完整功能，请验证邮箱。",cancelBtn:{},confirmBtn:{callback:function(){window.location.href="/edmActive?disable_sinaurl=1"}}})):e(f);break;case"ag:4_st:3":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"你的邮箱未激活！激活邮箱，即可使用邮箱和密码登录微博，安全又方便。",cancelBtn:!0,confirmBtn:{txt:"立即激活",callback:function(){window.location.href="https://passport.sina.cn/bindname/mail?entry=mweibo"}}})):e(f);break;default:e(f)}},$.ajax(a)},b}}),define("ux/alertPop",function(require,a,b){function c(){function a(a){return m=a||{},m.wrapperId?$("#"+m.wrapperId).size()?void alert(m.wrapperId+" ID 已经被占用啦！"):(h=d(m),e.append(h),$("body").append(e),i=$("#"+(m.wrapperId||"J-alertPop")),j=i.find(".wrapper"),k=i.find("#"+(m.cancelBtn&&m.cancelBtn.id||"J-alertPop-cancel")),l=i.find("#"+(m.confirmBtn&&m.confirmBtn.id||"J-alertPop-confirm")),g(),i.removeClass("hid"),f(),void(m.html&&m.htmlFunction&&m.htmlFunction.call(this,i.find(".custom-wrapper")))):void alert("alertPop 需要唯一标示 ID，庸人这么多，牵错手了可不是闹着玩儿的！")}function b(a,b,c){c="number"==typeof c&&c>3e3?c:3e3;var d=a.parent().parent().find(".error-label");d.html(b||"请重新输入").removeClass("hid"),clearTimeout(n.errorTimer),n.errorTimer=setTimeout(function(){d.addClass("hid").html("")},c)}function c(){i.addClass("hid"),i.remove()}function f(){var a=$("body").outerHeight(!0),b=j.outerHeight(),c=j.outerWidth(),d=window.scrollY,e=window.innerHeight,f=window.innerWidth;j.css({top:(e-b)/2+d,left:(f-c)/2}),i.css({height:a>e?a:e})}function g(a){l.on("click",o.confirm),k.on("click",o.cancel)}var h,i,j,k,l,m,n={},o={cancel:function(){var a=$(this);if(!a.hasClass("isDisabled"))return c(),m.cancelBtn&&m.cancelBtn.callback&&m.cancelBtn.callback.call(this,i),!1},confirm:function(){var a=$(this);if(!a.hasClass("isDisabled"))return m.confirmBtn&&m.confirmBtn.callback?m.confirmBtn.callback.call(this,i):c(),!1}};return{init:a,showError:b,close:c}}var d=require("tpl/ux/alertPop"),e=$(document.createDocumentFragment());b.exports=c}),define("tpl/ux/alertPop",function(require,a,b){require("core/tplFunc");b.exports=function(a){var b='<div id="'+a.wrapperId+'" class="alert-wrapper hid"><article class="wrapper">';if(a.title&&(b+='<header class="title">'+a.title+"</header>"),b+=" ",a.info&&(b+='<span class="info">'+a.info+"</span>"),b+=" ",a.html&&(b+='<div class="custom-wrapper">'+a.html+"</div>"),b+=" ",a.label&&(b+='<span class="label">'+a.label+"</span>"),b+=" ",a.inputArr&&a.inputArr.length){b+=" ";var c=a.inputArr;if(c)for(var d,e=-1,f=c.length-1;f>e;){if(d=c[e+=1],b+='<div class="input-wrapper"><div class="input-item">',"object"==typeof d&&d.length){b+=" ";var g=d;if(g)for(var h,i=-1,j=g.length-1;j>i;)h=g[i+=1],b+='<input id="'+(h.id||"")+'" name="'+(h.name||"")+'" type="text" placeholder="'+(h.placeholder||"")+'" value="'+(h.value||"")+'"/>';b+=" "}else b+='<input id="'+(d.id||"")+'" name="'+(d.name||"")+'" type="text" placeholder="'+(d.placeholder||"")+'" value="'+(d.value||"")+'"/>';b+='</div><p class="error-label hid"></p></div>'}b+=" "}return b+='<div class="action">',(a.cancelBtn||!a.cancelBtn&&!a.confirmBtn)&&(b+='<a id="'+(a.cancelBtn&&a.cancelBtn.id||"J-alertPop-cancel")+'" href="javascript:void(0);" class="btn cancel-btn',a.cancelBtn&&a.cancelBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.cancelBtn&&a.cancelBtn.txt||"取消")+"</a>"),b+=" ",a.confirmBtn&&(b+='<a id="'+(a.confirmBtn&&a.confirmBtn.id||"J-alertPop-confirm")+'" href="javascript:void(0);" class="btn confirm-btn',a.confirmBtn&&a.confirmBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.confirmBtn&&a.confirmBtn.txt||"确定")+"</a>"),b+="</div></article></div>"}}),define("act/follow",function(require,a,b){var c=require("jquery"),d="接口请求失败！",e=require("brick"),f=require("core/tplFunc").canAccessLink,g=require("core/io/trans")(),h=g.json;a.events={click:function(a,b,g){if(a.preventDefault(),!f)return e.notice.trigger("AccessDenied"),!1;var i="cover"==g.position;"1"==g.sub_type;if(1==g.sub_type&&!i)return!1;var j=c(b),k=j.data("act-url")||j.attr("href");return h({url:k,type:"POST",dataType:"json",data:{sub_type:g.sub_type,st:$render_data.common.st},success:function(a){1==a.ok?a.button&&(i?require(["tpl/mod/_cover_btn"],function(b){var c=b(a.button);j.replaceWith(c)}):require(["tpl/common/button"],function(b){var c=b(a.button);j.replaceWith(c)})):alert(a.msg||d)}}),!1}}}),define("core/tplFunc",function(require,a,b){var c=require("core/util/keepParams"),d=require("core/util/checkLogin");require("core/util/accessLevel");a.canAccessLink=function(){return!!d}(),a.href=function(b){var e=b;return b&&("object"!=typeof b||(e=b.urls&&b.urls.h5||b.scheme))?!d&&$render_data.common.showPopLogin?"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":a.canAccessLink?0===e.indexOf("javascript:")?e:c(e):"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":"javascript:;"}}),define("core/util/keepParams",function(require,a,b){b.exports=function(a,b){var c,d=$render_data.common;return a&&d&&(c=b?d.ajaxPassParams:d.passParams,c&&(a+=-1!=a.indexOf("?")?"&"+c:"?"+c)),a}}),define("core/util/checkLogin",function(require,a,b){b.exports=function(){return!(1!=$render_data.common.isLogin&&1!=$render_data.common.login)}()}),define("core/util/accessLevel",function(require,a,b){b.exports=$render_data.common.seeLevel||0}),define("core/io/trans",function(require,a,b){var c=require("core/util/keepParams"),d=require("../../ux/alertPop"),d=require("../../ux/alertPop");b.exports=function(){var a={},b={};return b.set=function(b,c){if("undefined"!=typeof a[b])throw b+" 接口已经被定义！";a[b]=c},b.get=function(c,d){if("undefined"==typeof a[c])throw c+" 接口没有定义！";var e=$.extend({},a[c],d);b.json(e)},b.json=function(a){a.url=c(a.url,!0),a.type=a.type||"get",a.dataType=a.dataType||"json",a.timeout=a.timeout||1e3*("get"==a.type?30:60),"post"==a.type.toLowerCase()&&(a.data=a.data||{},a.data.st||(a.data.st=$render_data.common.st));var e=a.success;a.success=function(f){var g=((new Date).getTime(),""+f.ok);switch(g){case"-3":case"20031":$("#J-toast-wrapper").addClass("hid");var h=new d;return h.init({wrapperId:"J-"+(new Date).getTime(),html:'<div style="overflow:hidden;"><p style="margin:6px auto 22px;font-size:1.125rem;text-align:center">你发的太疯狂啦，请验证一下</p><img style="display:block;margin:0 0 15px;height:30px;" src="http://weibo.cn/interface/f/ttt/captcha/show.php?c='+f.captId+'" alt="验证码获取失败" /></div>',inputArr:[{placeholder:"请输入验证码"}],cancelBtn:{},confirmBtn:{callback:function(c){var d=c.find("input"),e=String.prototype.trim.call(d.val());return""==e?(h.showError(d,"验证码不能为空"),!1):(h.close(),a.data.captId=f.captId,a.data.code=e,void b.json(a))}}}),!1;case"-7":window.location.href="/security?from=0";break;case"-8":window.location.href="/security";break;case"-9":"post"==a.type.toLowerCase()?(alert("您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。"),location.href="/security/readonly"):e(f);break;case"-9+225":case"-9+222":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。",confirmBtn:{callback:function(){window.location.href="/security/stolenReadOnly"}}})):e(f);break;case"-98":case"-100":location.href=c(f.url||"/login?backUrl="+decodeURIComponent(location.href));break;case"-255":alert("您的帐号疑似被盗，已经被系统锁定部分功能，为了保障您的帐号安全，请立即修改密码。"),location.href="/security";break;case"403":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。\n如需帮助，请联系客服。");break;case"2014":location.href=data.location;break;case"20016":$("#J-toast-wrapper").addClass("hid"),alert("发微博太多啦，休息一会儿吧!");break;case"20018":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。");break;case"20019":$("#J-toast-wrapper").addClass("hid"),alert("相同内容请隔10分钟再进行发布哦。");break;case"20020":$("#J-toast-wrapper").addClass("hid"),alert("由于该内容为广告信息，无法进行发布！");break;case"20021":$("#J-toast-wrapper").addClass("hid"),alert("抱歉，此内容违反了《微博社区管理规定(试行)》或相关法规政策，无法进行指定操作。");break;case"20038":$("#J-toast-wrapper").addClass("hid"),alert("您刚才已经发过相似的内容啦，建议您第二天再尝试！");break;case"20046":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的登录邮箱尚未验证，不能使用完整功能，请验证邮箱。",cancelBtn:{},confirmBtn:{callback:function(){window.location.href="/edmActive?disable_sinaurl=1"}}})):e(f);break;case"ag:4_st:3":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"你的邮箱未激活！激活邮箱，即可使用邮箱和密码登录微博，安全又方便。",cancelBtn:!0,confirmBtn:{txt:"立即激活",callback:function(){window.location.href="https://passport.sina.cn/bindname/mail?entry=mweibo";
}}})):e(f);break;default:e(f)}},$.ajax(a)},b}}),define("ux/alertPop",function(require,a,b){function c(){function a(a){return m=a||{},m.wrapperId?$("#"+m.wrapperId).size()?void alert(m.wrapperId+" ID 已经被占用啦！"):(h=d(m),e.append(h),$("body").append(e),i=$("#"+(m.wrapperId||"J-alertPop")),j=i.find(".wrapper"),k=i.find("#"+(m.cancelBtn&&m.cancelBtn.id||"J-alertPop-cancel")),l=i.find("#"+(m.confirmBtn&&m.confirmBtn.id||"J-alertPop-confirm")),g(),i.removeClass("hid"),f(),void(m.html&&m.htmlFunction&&m.htmlFunction.call(this,i.find(".custom-wrapper")))):void alert("alertPop 需要唯一标示 ID，庸人这么多，牵错手了可不是闹着玩儿的！")}function b(a,b,c){c="number"==typeof c&&c>3e3?c:3e3;var d=a.parent().parent().find(".error-label");d.html(b||"请重新输入").removeClass("hid"),clearTimeout(n.errorTimer),n.errorTimer=setTimeout(function(){d.addClass("hid").html("")},c)}function c(){i.addClass("hid"),i.remove()}function f(){var a=$("body").outerHeight(!0),b=j.outerHeight(),c=j.outerWidth(),d=window.scrollY,e=window.innerHeight,f=window.innerWidth;j.css({top:(e-b)/2+d,left:(f-c)/2}),i.css({height:a>e?a:e})}function g(a){l.on("click",o.confirm),k.on("click",o.cancel)}var h,i,j,k,l,m,n={},o={cancel:function(){var a=$(this);if(!a.hasClass("isDisabled"))return c(),m.cancelBtn&&m.cancelBtn.callback&&m.cancelBtn.callback.call(this,i),!1},confirm:function(){var a=$(this);if(!a.hasClass("isDisabled"))return m.confirmBtn&&m.confirmBtn.callback?m.confirmBtn.callback.call(this,i):c(),!1}};return{init:a,showError:b,close:c}}var d=require("tpl/ux/alertPop"),e=$(document.createDocumentFragment());b.exports=c}),define("tpl/ux/alertPop",function(require,a,b){require("core/tplFunc");b.exports=function(a){var b='<div id="'+a.wrapperId+'" class="alert-wrapper hid"><article class="wrapper">';if(a.title&&(b+='<header class="title">'+a.title+"</header>"),b+=" ",a.info&&(b+='<span class="info">'+a.info+"</span>"),b+=" ",a.html&&(b+='<div class="custom-wrapper">'+a.html+"</div>"),b+=" ",a.label&&(b+='<span class="label">'+a.label+"</span>"),b+=" ",a.inputArr&&a.inputArr.length){b+=" ";var c=a.inputArr;if(c)for(var d,e=-1,f=c.length-1;f>e;){if(d=c[e+=1],b+='<div class="input-wrapper"><div class="input-item">',"object"==typeof d&&d.length){b+=" ";var g=d;if(g)for(var h,i=-1,j=g.length-1;j>i;)h=g[i+=1],b+='<input id="'+(h.id||"")+'" name="'+(h.name||"")+'" type="text" placeholder="'+(h.placeholder||"")+'" value="'+(h.value||"")+'"/>';b+=" "}else b+='<input id="'+(d.id||"")+'" name="'+(d.name||"")+'" type="text" placeholder="'+(d.placeholder||"")+'" value="'+(d.value||"")+'"/>';b+='</div><p class="error-label hid"></p></div>'}b+=" "}return b+='<div class="action">',(a.cancelBtn||!a.cancelBtn&&!a.confirmBtn)&&(b+='<a id="'+(a.cancelBtn&&a.cancelBtn.id||"J-alertPop-cancel")+'" href="javascript:void(0);" class="btn cancel-btn',a.cancelBtn&&a.cancelBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.cancelBtn&&a.cancelBtn.txt||"取消")+"</a>"),b+=" ",a.confirmBtn&&(b+='<a id="'+(a.confirmBtn&&a.confirmBtn.id||"J-alertPop-confirm")+'" href="javascript:void(0);" class="btn confirm-btn',a.confirmBtn&&a.confirmBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.confirmBtn&&a.confirmBtn.txt||"确定")+"</a>"),b+="</div></article></div>"}}),define("act/hover",function(require,a,b){function c(){d&&d.removeClass("active"),d=0,e(document).off("touchend touchmove mouseup mousemove",c)}var d,e=require("jquery"),f=(require("brick"),require("core/io/actLog"));a.events={"touchstart mousedown":function(a,b){a.stopPropagation(),c(),d=e(b),setTimeout(function(){d&&d.addClass("active")},55),e(document).on("touchend touchmove mouseup mousemove click",c)},click:function(a,b){a.stopPropagation(),d=e(b);var c=d.data("jump"),g=d.data("jump-ignore");if(g){var h=a.target;if(-1!=g.split(",").indexOf(h.tagName.toLowerCase()))return}return c&&(d.data("actcode")?f(d.data("actcode"),function(){location.href=c}):location.href=c),!1}}}),define("core/io/actLog",function(require,a,b){b.exports=function(a,b){if(a){var c="/h5logs/actionLog?type=pic&act_code="+a+"&t="+(new Date).getTime(),d=require("core/util/keepParams");c=d(c,!0);var e=new Image;b&&(e.onload=b,e.onerror=b),e.src=c}}}),define("core/util/keepParams",function(require,a,b){b.exports=function(a,b){var c,d=$render_data.common;return a&&d&&(c=b?d.ajaxPassParams:d.passParams,c&&(a+=-1!=a.indexOf("?")?"&"+c:"?"+c)),a}}),define("act/like",function(require,a,b){var c=require("jquery"),d="接口请求失败！",e=require("brick"),f=require("core/tplFunc").canAccessLink,g=require("core/io/trans")(),h=g.json;a.events={click:function(a,b,g){if(a.preventDefault(),!f)return e.notice.trigger("AccessDenied"),!1;var i=c(b),j=i.data("act-url")||i.attr("href"),k="cover"==g.position,l="1"==g.sub_type,m=parseInt(i.find(".inner").find("div").text(),10);return h({url:j,type:"POST",dataType:"json",data:{sub_type:g.sub_type},success:function(a){1==a.ok?a.button&&(k?require(["tpl/mod/_cover_btn"],function(b){i.replaceWith(b(a.button))}):require(["tpl/common/button"],function(b){var d=c(b(a.button));if(i.replaceWith(d),g.show_count){var e=l?m-1:m+1;d.find(".inner").append('<div class="txt-xl mct-d">'+e+"</div>"),d.attr("data-act-data",d.attr("data-act-data")+"&show_count=1")}})):alert(a.msg||d)}}),!1}}}),define("core/tplFunc",function(require,a,b){var c=require("core/util/keepParams"),d=require("core/util/checkLogin");require("core/util/accessLevel");a.canAccessLink=function(){return!!d}(),a.href=function(b){var e=b;return b&&("object"!=typeof b||(e=b.urls&&b.urls.h5||b.scheme))?!d&&$render_data.common.showPopLogin?"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":a.canAccessLink?0===e.indexOf("javascript:")?e:c(e):"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":"javascript:;"}}),define("core/util/keepParams",function(require,a,b){b.exports=function(a,b){var c,d=$render_data.common;return a&&d&&(c=b?d.ajaxPassParams:d.passParams,c&&(a+=-1!=a.indexOf("?")?"&"+c:"?"+c)),a}}),define("core/util/checkLogin",function(require,a,b){b.exports=function(){return!(1!=$render_data.common.isLogin&&1!=$render_data.common.login)}()}),define("core/util/accessLevel",function(require,a,b){b.exports=$render_data.common.seeLevel||0}),define("core/io/trans",function(require,a,b){var c=require("core/util/keepParams"),d=require("../../ux/alertPop"),d=require("../../ux/alertPop");b.exports=function(){var a={},b={};return b.set=function(b,c){if("undefined"!=typeof a[b])throw b+" 接口已经被定义！";a[b]=c},b.get=function(c,d){if("undefined"==typeof a[c])throw c+" 接口没有定义！";var e=$.extend({},a[c],d);b.json(e)},b.json=function(a){a.url=c(a.url,!0),a.type=a.type||"get",a.dataType=a.dataType||"json",a.timeout=a.timeout||1e3*("get"==a.type?30:60),"post"==a.type.toLowerCase()&&(a.data=a.data||{},a.data.st||(a.data.st=$render_data.common.st));var e=a.success;a.success=function(f){var g=((new Date).getTime(),""+f.ok);switch(g){case"-3":case"20031":$("#J-toast-wrapper").addClass("hid");var h=new d;return h.init({wrapperId:"J-"+(new Date).getTime(),html:'<div style="overflow:hidden;"><p style="margin:6px auto 22px;font-size:1.125rem;text-align:center">你发的太疯狂啦，请验证一下</p><img style="display:block;margin:0 0 15px;height:30px;" src="http://weibo.cn/interface/f/ttt/captcha/show.php?c='+f.captId+'" alt="验证码获取失败" /></div>',inputArr:[{placeholder:"请输入验证码"}],cancelBtn:{},confirmBtn:{callback:function(c){var d=c.find("input"),e=String.prototype.trim.call(d.val());return""==e?(h.showError(d,"验证码不能为空"),!1):(h.close(),a.data.captId=f.captId,a.data.code=e,void b.json(a))}}}),!1;case"-7":window.location.href="/security?from=0";break;case"-8":window.location.href="/security";break;case"-9":"post"==a.type.toLowerCase()?(alert("您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。"),location.href="/security/readonly"):e(f);break;case"-9+225":case"-9+222":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。",confirmBtn:{callback:function(){window.location.href="/security/stolenReadOnly"}}})):e(f);break;case"-98":case"-100":location.href=c(f.url||"/login?backUrl="+decodeURIComponent(location.href));break;case"-255":alert("您的帐号疑似被盗，已经被系统锁定部分功能，为了保障您的帐号安全，请立即修改密码。"),location.href="/security";break;case"403":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。\n如需帮助，请联系客服。");break;case"2014":location.href=data.location;break;case"20016":$("#J-toast-wrapper").addClass("hid"),alert("发微博太多啦，休息一会儿吧!");break;case"20018":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。");break;case"20019":$("#J-toast-wrapper").addClass("hid"),alert("相同内容请隔10分钟再进行发布哦。");break;case"20020":$("#J-toast-wrapper").addClass("hid"),alert("由于该内容为广告信息，无法进行发布！");break;case"20021":$("#J-toast-wrapper").addClass("hid"),alert("抱歉，此内容违反了《微博社区管理规定(试行)》或相关法规政策，无法进行指定操作。");break;case"20038":$("#J-toast-wrapper").addClass("hid"),alert("您刚才已经发过相似的内容啦，建议您第二天再尝试！");break;case"20046":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的登录邮箱尚未验证，不能使用完整功能，请验证邮箱。",cancelBtn:{},confirmBtn:{callback:function(){window.location.href="/edmActive?disable_sinaurl=1"}}})):e(f);break;case"ag:4_st:3":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"你的邮箱未激活！激活邮箱，即可使用邮箱和密码登录微博，安全又方便。",cancelBtn:!0,confirmBtn:{txt:"立即激活",callback:function(){window.location.href="https://passport.sina.cn/bindname/mail?entry=mweibo"}}})):e(f);break;default:e(f)}},$.ajax(a)},b}}),define("ux/alertPop",function(require,a,b){function c(){function a(a){return m=a||{},m.wrapperId?$("#"+m.wrapperId).size()?void alert(m.wrapperId+" ID 已经被占用啦！"):(h=d(m),e.append(h),$("body").append(e),i=$("#"+(m.wrapperId||"J-alertPop")),j=i.find(".wrapper"),k=i.find("#"+(m.cancelBtn&&m.cancelBtn.id||"J-alertPop-cancel")),l=i.find("#"+(m.confirmBtn&&m.confirmBtn.id||"J-alertPop-confirm")),g(),i.removeClass("hid"),f(),void(m.html&&m.htmlFunction&&m.htmlFunction.call(this,i.find(".custom-wrapper")))):void alert("alertPop 需要唯一标示 ID，庸人这么多，牵错手了可不是闹着玩儿的！")}function b(a,b,c){c="number"==typeof c&&c>3e3?c:3e3;var d=a.parent().parent().find(".error-label");d.html(b||"请重新输入").removeClass("hid"),clearTimeout(n.errorTimer),n.errorTimer=setTimeout(function(){d.addClass("hid").html("")},c)}function c(){i.addClass("hid"),i.remove()}function f(){var a=$("body").outerHeight(!0),b=j.outerHeight(),c=j.outerWidth(),d=window.scrollY,e=window.innerHeight,f=window.innerWidth;j.css({top:(e-b)/2+d,left:(f-c)/2}),i.css({height:a>e?a:e})}function g(a){l.on("click",o.confirm),k.on("click",o.cancel)}var h,i,j,k,l,m,n={},o={cancel:function(){var a=$(this);if(!a.hasClass("isDisabled"))return c(),m.cancelBtn&&m.cancelBtn.callback&&m.cancelBtn.callback.call(this,i),!1},confirm:function(){var a=$(this);if(!a.hasClass("isDisabled"))return m.confirmBtn&&m.confirmBtn.callback?m.confirmBtn.callback.call(this,i):c(),!1}};return{init:a,showError:b,close:c}}var d=require("tpl/ux/alertPop"),e=$(document.createDocumentFragment());b.exports=c}),define("tpl/ux/alertPop",function(require,a,b){require("core/tplFunc");b.exports=function(a){var b='<div id="'+a.wrapperId+'" class="alert-wrapper hid"><article class="wrapper">';if(a.title&&(b+='<header class="title">'+a.title+"</header>"),b+=" ",a.info&&(b+='<span class="info">'+a.info+"</span>"),b+=" ",a.html&&(b+='<div class="custom-wrapper">'+a.html+"</div>"),b+=" ",a.label&&(b+='<span class="label">'+a.label+"</span>"),b+=" ",a.inputArr&&a.inputArr.length){b+=" ";var c=a.inputArr;if(c)for(var d,e=-1,f=c.length-1;f>e;){if(d=c[e+=1],b+='<div class="input-wrapper"><div class="input-item">',"object"==typeof d&&d.length){b+=" ";var g=d;if(g)for(var h,i=-1,j=g.length-1;j>i;)h=g[i+=1],b+='<input id="'+(h.id||"")+'" name="'+(h.name||"")+'" type="text" placeholder="'+(h.placeholder||"")+'" value="'+(h.value||"")+'"/>';b+=" "}else b+='<input id="'+(d.id||"")+'" name="'+(d.name||"")+'" type="text" placeholder="'+(d.placeholder||"")+'" value="'+(d.value||"")+'"/>';b+='</div><p class="error-label hid"></p></div>'}b+=" "}return b+='<div class="action">',(a.cancelBtn||!a.cancelBtn&&!a.confirmBtn)&&(b+='<a id="'+(a.cancelBtn&&a.cancelBtn.id||"J-alertPop-cancel")+'" href="javascript:void(0);" class="btn cancel-btn',a.cancelBtn&&a.cancelBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.cancelBtn&&a.cancelBtn.txt||"取消")+"</a>"),b+=" ",a.confirmBtn&&(b+='<a id="'+(a.confirmBtn&&a.confirmBtn.id||"J-alertPop-confirm")+'" href="javascript:void(0);" class="btn confirm-btn',a.confirmBtn&&a.confirmBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.confirmBtn&&a.confirmBtn.txt||"确定")+"</a>"),b+="</div></article></div>"}}),define("act/link",function(require,a,b){var c=require("brick"),d=require("core/tplFunc").canAccessLink;a.events={click:function(a,b,e){if(a.stopPropagation(),!d)return c.notice.trigger("AccessDenied"),!1;var f=$(b),g=f.data("act-url");g&&(location.href=g)}}}),define("core/tplFunc",function(require,a,b){var c=require("core/util/keepParams"),d=require("core/util/checkLogin");require("core/util/accessLevel");a.canAccessLink=function(){return!!d}(),a.href=function(b){var e=b;return b&&("object"!=typeof b||(e=b.urls&&b.urls.h5||b.scheme))?!d&&$render_data.common.showPopLogin?"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":a.canAccessLink?0===e.indexOf("javascript:")?e:c(e):"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":"javascript:;"}}),define("core/util/keepParams",function(require,a,b){b.exports=function(a,b){var c,d=$render_data.common;return a&&d&&(c=b?d.ajaxPassParams:d.passParams,c&&(a+=-1!=a.indexOf("?")?"&"+c:"?"+c)),a}}),define("core/util/checkLogin",function(require,a,b){b.exports=function(){return!(1!=$render_data.common.isLogin&&1!=$render_data.common.login)}()}),define("core/util/accessLevel",function(require,a,b){b.exports=$render_data.common.seeLevel||0}),define("act/picShow",function(require,a,b){var c=require("jquery");a.events={click:function(a,b,d){var e=c(b),f=e.data("src")||e.attr("src");f=f.replace(/\/\w+\//,"/large/"),require(["ux/picShow"],function(a){new a({imgList:f})})}}}),define("act/relation",function(require,a,b){function c(a,b){var c=require("ux/relationPop");c.init(a,b,$(".module-cover").find(".item-main").find("span").text())}function d(a,b,d,e){f({url:"/attentionDeal/"+a+"?",dataType:"json",type:"POST",data:{uid:b,st:$render_data.common.st},success:function(a,f,g){if(1==a.ok){2>d?(d+=2,c(e,b)):d-=3,console.log(d);var h={type:"relation",sub_type:d,uid:b},i=require("tpl/mod/_cover_btn")(h);e.replaceWith(i)}},error:function(){alert("操作失败，请稍后再试")}})}var e=require("core/io/trans")(),f=e.json,g=require("brick"),h=require("core/tplFunc").canAccessLink,e=require("core/io/trans")(),f=e.json;a.events={click:function(a,b,e){if(!h)return g.notice.trigger("AccessDenied"),!1;var f=$(b),i=f.data("act-uid"),j=parseInt(e.sub_type,10);if(2==j||3==j)return c(f,i),!1;if(4==j);else{var k="addAttention",l="";if((5==j||6==j)&&(k="delPrivate",l="你确定要关注，不再消悄悄关注吗？"),""!==l&&!confirm(l))return!1;d(k,i,j,f)}}}}),define("core/io/trans",function(require,a,b){var c=require("core/util/keepParams"),d=require("../../ux/alertPop"),d=require("../../ux/alertPop");b.exports=function(){var a={},b={};return b.set=function(b,c){if("undefined"!=typeof a[b])throw b+" 接口已经被定义！";a[b]=c},b.get=function(c,d){if("undefined"==typeof a[c])throw c+" 接口没有定义！";var e=$.extend({},a[c],d);b.json(e)},b.json=function(a){a.url=c(a.url,!0),a.type=a.type||"get",a.dataType=a.dataType||"json",a.timeout=a.timeout||1e3*("get"==a.type?30:60),"post"==a.type.toLowerCase()&&(a.data=a.data||{},a.data.st||(a.data.st=$render_data.common.st));var e=a.success;a.success=function(f){var g=((new Date).getTime(),""+f.ok);switch(g){case"-3":case"20031":$("#J-toast-wrapper").addClass("hid");var h=new d;return h.init({wrapperId:"J-"+(new Date).getTime(),html:'<div style="overflow:hidden;"><p style="margin:6px auto 22px;font-size:1.125rem;text-align:center">你发的太疯狂啦，请验证一下</p><img style="display:block;margin:0 0 15px;height:30px;" src="http://weibo.cn/interface/f/ttt/captcha/show.php?c='+f.captId+'" alt="验证码获取失败" /></div>',inputArr:[{placeholder:"请输入验证码"}],cancelBtn:{},confirmBtn:{callback:function(c){var d=c.find("input"),e=String.prototype.trim.call(d.val());return""==e?(h.showError(d,"验证码不能为空"),!1):(h.close(),a.data.captId=f.captId,a.data.code=e,void b.json(a))}}}),!1;case"-7":window.location.href="/security?from=0";break;case"-8":window.location.href="/security";break;case"-9":"post"==a.type.toLowerCase()?(alert("您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。"),location.href="/security/readonly"):e(f);break;case"-9+225":case"-9+222":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的帐号存在风险，系统暂时锁定了部分功能，请通过手机验证以恢复正常。",confirmBtn:{callback:function(){window.location.href="/security/stolenReadOnly"}}})):e(f);break;case"-98":case"-100":location.href=c(f.url||"/login?backUrl="+decodeURIComponent(location.href));break;case"-255":alert("您的帐号疑似被盗，已经被系统锁定部分功能，为了保障您的帐号安全，请立即修改密码。"),location.href="/security";break;case"403":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。\n如需帮助，请联系客服。");break;case"2014":location.href=data.location;break;case"20016":$("#J-toast-wrapper").addClass("hid"),alert("发微博太多啦，休息一会儿吧!");break;case"20018":$("#J-toast-wrapper").addClass("hid"),alert("您输入的网址疑似为不安全链接，无法发表，请谅解。");break;case"20019":$("#J-toast-wrapper").addClass("hid"),alert("相同内容请隔10分钟再进行发布哦。");break;case"20020":$("#J-toast-wrapper").addClass("hid"),alert("由于该内容为广告信息，无法进行发布！");break;case"20021":$("#J-toast-wrapper").addClass("hid"),alert("抱歉，此内容违反了《微博社区管理规定(试行)》或相关法规政策，无法进行指定操作。");break;case"20038":$("#J-toast-wrapper").addClass("hid"),alert("您刚才已经发过相似的内容啦，建议您第二天再尝试！");break;case"20046":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"您的登录邮箱尚未验证，不能使用完整功能，请验证邮箱。",cancelBtn:{},confirmBtn:{callback:function(){window.location.href="/edmActive?disable_sinaurl=1"}}})):e(f);break;case"ag:4_st:3":"post"==a.type.toLowerCase()?($(".toast-wrapper").addClass("hid"),(new d).init({wrapperId:"J-"+(new Date).getTime(),info:"你的邮箱未激活！激活邮箱，即可使用邮箱和密码登录微博，安全又方便。",cancelBtn:!0,confirmBtn:{txt:"立即激活",callback:function(){window.location.href="https://passport.sina.cn/bindname/mail?entry=mweibo"}}})):e(f);break;default:e(f)}},$.ajax(a)},b}}),define("core/util/keepParams",function(require,a,b){b.exports=function(a,b){var c,d=$render_data.common;return a&&d&&(c=b?d.ajaxPassParams:d.passParams,c&&(a+=-1!=a.indexOf("?")?"&"+c:"?"+c)),a}}),define("ux/alertPop",function(require,a,b){function c(){function a(a){return m=a||{},m.wrapperId?$("#"+m.wrapperId).size()?void alert(m.wrapperId+" ID 已经被占用啦！"):(h=d(m),e.append(h),$("body").append(e),i=$("#"+(m.wrapperId||"J-alertPop")),j=i.find(".wrapper"),k=i.find("#"+(m.cancelBtn&&m.cancelBtn.id||"J-alertPop-cancel")),l=i.find("#"+(m.confirmBtn&&m.confirmBtn.id||"J-alertPop-confirm")),g(),i.removeClass("hid"),f(),void(m.html&&m.htmlFunction&&m.htmlFunction.call(this,i.find(".custom-wrapper")))):void alert("alertPop 需要唯一标示 ID，庸人这么多，牵错手了可不是闹着玩儿的！")}function b(a,b,c){c="number"==typeof c&&c>3e3?c:3e3;var d=a.parent().parent().find(".error-label");d.html(b||"请重新输入").removeClass("hid"),clearTimeout(n.errorTimer),n.errorTimer=setTimeout(function(){d.addClass("hid").html("")},c)}function c(){i.addClass("hid"),i.remove()}function f(){var a=$("body").outerHeight(!0),b=j.outerHeight(),c=j.outerWidth(),d=window.scrollY,e=window.innerHeight,f=window.innerWidth;j.css({top:(e-b)/2+d,left:(f-c)/2}),i.css({height:a>e?a:e})}function g(a){l.on("click",o.confirm),k.on("click",o.cancel)}var h,i,j,k,l,m,n={},o={cancel:function(){var a=$(this);if(!a.hasClass("isDisabled"))return c(),m.cancelBtn&&m.cancelBtn.callback&&m.cancelBtn.callback.call(this,i),!1},confirm:function(){var a=$(this);if(!a.hasClass("isDisabled"))return m.confirmBtn&&m.confirmBtn.callback?m.confirmBtn.callback.call(this,i):c(),!1}};return{init:a,showError:b,close:c}}var d=require("tpl/ux/alertPop"),e=$(document.createDocumentFragment());b.exports=c}),define("tpl/ux/alertPop",function(require,a,b){require("core/tplFunc");b.exports=function(a){var b='<div id="'+a.wrapperId+'" class="alert-wrapper hid"><article class="wrapper">';if(a.title&&(b+='<header class="title">'+a.title+"</header>"),b+=" ",a.info&&(b+='<span class="info">'+a.info+"</span>"),b+=" ",a.html&&(b+='<div class="custom-wrapper">'+a.html+"</div>"),b+=" ",a.label&&(b+='<span class="label">'+a.label+"</span>"),b+=" ",a.inputArr&&a.inputArr.length){b+=" ";var c=a.inputArr;if(c)for(var d,e=-1,f=c.length-1;f>e;){if(d=c[e+=1],b+='<div class="input-wrapper"><div class="input-item">',"object"==typeof d&&d.length){b+=" ";var g=d;if(g)for(var h,i=-1,j=g.length-1;j>i;)h=g[i+=1],b+='<input id="'+(h.id||"")+'" name="'+(h.name||"")+'" type="text" placeholder="'+(h.placeholder||"")+'" value="'+(h.value||"")+'"/>';b+=" "}else b+='<input id="'+(d.id||"")+'" name="'+(d.name||"")+'" type="text" placeholder="'+(d.placeholder||"")+'" value="'+(d.value||"")+'"/>';b+='</div><p class="error-label hid"></p></div>'}b+=" "}return b+='<div class="action">',(a.cancelBtn||!a.cancelBtn&&!a.confirmBtn)&&(b+='<a id="'+(a.cancelBtn&&a.cancelBtn.id||"J-alertPop-cancel")+'" href="javascript:void(0);" class="btn cancel-btn',a.cancelBtn&&a.cancelBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.cancelBtn&&a.cancelBtn.txt||"取消")+"</a>"),b+=" ",a.confirmBtn&&(b+='<a id="'+(a.confirmBtn&&a.confirmBtn.id||"J-alertPop-confirm")+'" href="javascript:void(0);" class="btn confirm-btn',a.confirmBtn&&a.confirmBtn.isDisabled&&(b+=" isDisabled"),b+='">'+(a.confirmBtn&&a.confirmBtn.txt||"确定")+"</a>"),b+="</div></article></div>"}}),define("core/tplFunc",function(require,a,b){var c=require("core/util/keepParams"),d=require("core/util/checkLogin");require("core/util/accessLevel");a.canAccessLink=function(){return!!d}(),a.href=function(b){var e=b;return b&&("object"!=typeof b||(e=b.urls&&b.urls.h5||b.scheme))?!d&&$render_data.common.showPopLogin?"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":a.canAccessLink?0===e.indexOf("javascript:")?e:c(e):"javascript:require(['brick'],function(brick){brick.notice.trigger('AccessDenied');});":"javascript:;"}}),define("core/util/checkLogin",function(require,a,b){b.exports=function(){return!(1!=$render_data.common.isLogin&&1!=$render_data.common.login)}()}),define("core/util/accessLevel",function(require,a,b){b.exports=$render_data.common.seeLevel||0}),define("ux/relationPop",function(require,a,b){function c(a,b,c){return t=b,u=c,void 0===typeof t?void console.error("莫得 uid，哪个知道你要找谁噻？！"):a?(v.isInit||($("body").append(n),o=$("#J-relationPop"),p=o.find("#J-scroll"),q=o.find("#J-list"),r=o.find("#J-action"),f(),g()),o.removeClass("hid"),v.isInit=!0,e(a),void $(document).bind("click",w.clickToClose)):void console.error("没有 $target 的手谕，relationPop 是不会现身的!")}function d(){if(s){try{s.destory()}catch(a){console.log(a)}s=null}h()}function e(a){var b=a.offset(),c=b.top+a.outerHeight()+10,d=b.left+a.outerWidth()/2-o.outerWidth()/2-60,e=window.innerWidth-o.outerWidth()-5;d=d>5?d>e?e:d:5,o.css({top:c,left:d})}function f(){i.get("getGroupList",{data:"uid="+t,success:function(a){if(1==a.ok){var b='<a href="javascript:;" id="J-addGroup" class="add-btn">新建分组</a>';$.each(a.data,function(a,c){b+='<a href="javascript:;" data-id="'+a+'"'+(c.isin?'class="checked"':"")+">"+c.gname+"</a>"}),o.find(".loadingLarge").remove(),p.append(b),require(["core/lib/iscroll"],function(a){s=new a("#J-list",{scrollbars:!0,resizenable:!1,preventDefaultException:{tagName:/^(SPAN|A|INPUT|TEXTAREA|BUTTON|SELECT|IMG)$/}})})}}})}function g(){p.on("click","a",w.changeGroup),p.on("click","#J-addGroup",w.createGroup),r.on("click","[data-action=unfollow]",w.unfollow),r.on("click","[data-action=close]",w.clickToClose)}function h(){p.off("click","a",w.changeGroup)}var i=require("conf/inter/relationPop"),j=require("tpl/ux/relationPop")(),k=require("ux/alertPop"),l=new k,m=new k,n=$(document.createDocumentFragment());n.append(j);var o,p,q,r,s,t,u,v={},w={createGroup:function(){l.init({wrapperId:"J-createGroup-pop",title:"创建分组",inputArr:[{id:"J-group-name",placeholder:"分组名称最多8个汉字"}],confirmBtn:{callback:function(a){var b=a.find("#J-group-name"),c=String.prototype.trim.call(b.val()),d=c.replace(/[\u4E00-\u9FA5]/g,"aa");return""==c?void l.showError(b,"分组名称不能为空，请重新输入"):d.length>16?void l.showError(b,"分组名称不能超过16个字符或8个汉字"):/^[a-zA-z0-9]*$/.test(d)?(l.close(),void i.get("createGroup",{data:"&uid="+t+"&gname="+encodeURIComponent(c),success:function(a){var c="";1===a.ok?($.each(a.data,function(a,b){c+='<a href="javascript:;" data-id="'+a+'" class="checked">'+b+"</a>"}),b.val(""),p.append(c),s.refresh(),s.scrollToElement("a:last-child",100)):alert(a.msg)}})):void l.showError(b,"分组名称由数字、字母、中文组成")}}})},changeGroup:function(){var a=$(this);if(!a.hasClass("add-btn")){var b=a.hasClass("checked")?"removeUserFromGroup":"addUserToGroup";a.addClass("loading"),i.get(b,{data:"&gid="+a.data("id")+"&uid="+t,success:function(b){var c=b.ok,d=b.msg;a.removeClass("loading"),1==c?a.toggleClass("checked"):alert(d)}})}},unfollow:function(a){m.init({wrapperId:"J-"+(new Date).getTime(),info:"确定不再关注 "+(u?u:"用户名")+" 了？",confirmBtn:{callback:function(){i.get("unfollow",{data:"&uid="+t,success:function(a){1==a.ok?location.reload():alert(a.msg),m.close()}})}}})},clickToClose:function(a){var b=$(a.target);if(b.length){var c="J-relationPop"===b.attr("id"),d=b.parents("#J-list").size()>0,e="show-relationPop"===b.data("node")||b.parents('[data-node="show-relationPop"]').size()>0;if(!c&&!d&&!e)return o.addClass("hid"),void $(document).unbind("click",w.clickToClose)}return!1}};b.exports={init:c,destory:d}}),define("conf/inter/relationPop",function(require,a,b){var c=require("core/io/trans")();c.set("getGroupList",{url:"/attGroups/getAttGroupListByUid"}),c.set("createGroup",{url:"/attGroupsDeal/createAndAddGroup",type:"post"}),c.set("addUserToGroup",{url:"/attGroupsDeal/addUserToGroup",type:"post"}),c.set("removeUserFromGroup",{url:"/attGroupsDeal/moveUserFromGroup",type:"post"}),c.set("unfollow",{url:"/attentionDeal/delAttention",type:"post"}),b.exports=c}),define("tpl/ux/relationPop",function(require,a,b){require("core/tplFunc");b.exports=function(a){var b='<div class="relation-wrapper" id="J-relationPop"><div class="list" id="J-list"><div id="J-scroll"><div class="loadingLarge"></div></div></div><div class="action" id="J-action"><p class="layout-box"><a href="javascript:;" class="box-col" data-action="unfollow">取消关注</a><a href="javascript:;" class="box-col" data-action="close-relationPop">确定</a></p></div></div>';return b}}),define("tpl/mod/_cover_btn",function(require,a,b){require("core/tplFunc");b.exports=function(a){var b='<button class="btn btn-normal" data-act-type="'+a.type+'" data-act-data="sub_type='+a.sub_type+'&position=cover"';return a.scheme&&(b+=' data-act-url="'+a.scheme+'"'),a.uid&&(b+=' data-act-uid="'+a.uid+'"'),a.like_count&&(b+=' data-act-like-count="'+a.like_count+'"'),b+=">",a.type&&"like"===a.type?(b+=" ",b+=a.sub_type&&1===a.sub_type?'<i class="iconimg iconimg-xs icon icon-likedsmall"></i>':'<i class="iconimg iconimg-xs icon icon-likesmall"></i>',b+="<span>"+(a.name||"赞一下")+"</span>"):a.type&&"follow"===a.type?(b+=" ",b+=a.sub_type&&1===a.sub_type?'<i class="iconf iconf_userinfo_tick"></i><span>已关注</span>':'<i class="iconf iconf_userinfo_plus"></i><span>关注</span>',b+=" "):a.type&&"relation"===a.type?(b+=" ",b+=a.sub_type&&2===a.sub_type?'<i class="iconf iconf_userinfo_tick txt-xl"></i><span>已关注</span><i class="icon-font icon-font-arrow-down txt-xs"></i>':a.sub_type&&3===a.sub_type?'<i class="iconf iconf_userinfo_arrow txt-xl"></i><span>相互关注</span><i class="icon-font icon-font-arrow-down txt-xs"></i>':a.sub_type&&1===a.sub_type?'<i class="iconf iconf_userinfo_tick txt-xl"></i><span>加关注</span><i class="icon-font icon-font-arrow-down txt-xs"></i>':'<i class="iconf iconf_userinfo_plus txt-xl"></i><span>加关注</span>',b+=" "):(b+=" ",a.icon?b+='<i class="iconf '+a.icon+' txt-xl"></i>':a.pic&&(b+='<i class="iconimg iconimg-xs"><img src="'+a.pic+'"></i>'),b+="<span>"+a.name+"</span>"),b+="</button>"}});